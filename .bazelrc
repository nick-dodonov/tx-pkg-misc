try-import %workspace%/.init.bazelrc
common --registry=https://raw.githubusercontent.com/nick-dodonov/tx-kit-registry/main
common --registry=https://bcr.bazel.build/
common --enable_platform_specific_config

# C++ standard settings per platform (boost.asio w/ coroutines needs C++20 at least)
build:linux --cxxopt="-std=c++23"
build:macos --cxxopt="-std=c++23"
build:wasm --cxxopt="-std=c++23"
build:windows --cxxopt="/std:c++latest"

# Configure boost.asio to use BoringSSL for SSL support
build --@boost.asio//:ssl=boringssl
build:wasm --@boost.asio//:ssl=no_ssl
build:windows --cxxopt="/std:c++latest"

try-import %workspace%/.dev.bazelrc
try-import %workspace%/.user.bazelrc

#TODO: make kit-ext tool for verbose output foreign rules (cmake) during build
#   (py watchdog can be used to capture .log files created during build)
# Current workaround example for sdl3:
#   tail -F bazel-out/darwin_arm64-dbg/bin/external/sdl3+/sdl3_static_base_foreign_cc/CMake.log & ; bazel build @sdl3//:sdl3_static_base
#   tail -F bazel-out/darwin_arm64-dbg-wasm/bin/external/sdl3+/sdl3_static_base_foreign_cc/CMake.log & ; bazel run demo/try-sdl3-2nd --config=wasm -- -s
